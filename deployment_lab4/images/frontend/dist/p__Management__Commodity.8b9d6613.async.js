(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[442],{20446:function(ce,K,t){"use strict";t.r(K);var Ze=t(26780),U=t(86444),h=t(13378),fe=t(83557),A=t(69564),Ce=t(11826),Z=t(8961),L=t(3911),De=t(66120),x=t(4867),ye=t(25324),O=t(45733),Me=t(43623),N=t(28930),Pe=t(74491),R=t(90383),Oe=t(13753),c=t(48429),Ie=t(68137),E=t(39394),d=t(52663),I=t(68699),ve=t(67604),n=t(47552),f=t(44742),X=t(94043),C=t.n(X),e=t(67294),v=t(44084),b=t(84391),W=t(59465),k=t(1977),S=t(49101),Y=t(18586),i=t(24480),P=v.Z.COMMODITY_URL,H=function(){var J=(0,e.useState)([]),V=(0,f.Z)(J,2),Q=V[0],w=V[1],q=(0,e.useState)({current:1,pageSize:10,total:0}),z=(0,f.Z)(q,2),D=z[0],j=z[1],ee=(0,e.useState)(!1),$=(0,f.Z)(ee,2),te=$[0],p=$[1],ne=(0,e.useState)(!1),G=(0,f.Z)(ne,2),le=G[0],g=G[1],ae=n.Z.useForm(),re=(0,f.Z)(ae,1),F=re[0],ue=n.Z.useForm(),_e=(0,f.Z)(ue,1),B=_e[0],oe=n.Z.useForm(),me=(0,f.Z)(oe,1),y=me[0],M=function(){var o=(0,I.Z)(C().mark(function r(){var a,l;return C().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=(0,d.Z)((0,d.Z)({},F.getFieldsValue()),{},{size:D.pageSize,page:D.current-1}),s.next=3,(0,i.kk)(P,a);case 3:l=s.sent,l&&(w(l.data.content),console.log(l.data.content),j((0,d.Z)((0,d.Z)({},D),{},{total:l.data.totalElements})));case 5:case"end":return s.stop()}},r)}));return function(){return o.apply(this,arguments)}}();(0,e.useEffect)(function(){M()},[D.current]);var se=function(){var o=(0,I.Z)(C().mark(function r(){var a,l,u,s;return C().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:for(a=B.getFieldsValue(),l=a.commodityTypes,u=0;u<l.length;u++)l[u].image=(0,i.Um)(l[u].image);return _.next=5,(0,i.jX)(P,(0,d.Z)((0,d.Z)({},B.getFieldsValue()),{},{commodityTypes:l}));case 5:s=_.sent,s&&(p(!1),M());case 7:case"end":return _.stop()}},r)}));return function(){return o.apply(this,arguments)}}(),ie=function(r){console.log("hello"),console.log(r);for(var a=r.commodityTypes,l=0;l<a.length;l++)console.log("before"+a[l].image),a[l].image=(0,i.zi)(a[l].image),console.log("after"+a[l].image);console.log(a),y.setFieldsValue((0,d.Z)((0,d.Z)({},r),{},{commodityTypes:a})),g(!0)},Ee=function(){var o=(0,I.Z)(C().mark(function r(){var a,l,u,s;return C().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:for(a=y.getFieldsValue(),l=a.commodityTypes,u=0;u<l.length;u++)l[u].image=(0,i.Um)(l[u].image);return _.next=5,(0,i.$G)(P,y.getFieldValue("id"),(0,d.Z)((0,d.Z)({},y.getFieldsValue()),{},{commodityTypes:l}));case 5:s=_.sent,s&&(g(!1),M());case 7:case"end":return _.stop()}},r)}));return function(){return o.apply(this,arguments)}}();return e.createElement(Y.ZP,null,e.createElement(R.Z,null,e.createElement(n.Z,{form:F,layout:"inline"},e.createElement(n.Z.Item,{name:"id",label:"ID"},e.createElement(E.Z,null)),e.createElement(n.Z.Item,{name:"name",label:"\u5546\u54C1\u540D\u79F0"},e.createElement(E.Z,null)),e.createElement(n.Z.Item,{name:"introduction",label:"\u5546\u54C1\u4ECB\u7ECD"},e.createElement(E.Z,null)),e.createElement(n.Z.Item,null,e.createElement(c.Z,{type:"primary",onClick:M},"\u67E5\u8BE2")),e.createElement(n.Z.Item,null,e.createElement(c.Z,{onClick:function(){return F.resetFields()}},"\u91CD\u7F6E")),e.createElement(n.Z.Item,null,e.createElement(c.Z,{type:"primary",onClick:function(){return p(!0)}},"\u65B0\u589E")))),e.createElement("br",null),e.createElement(R.Z,null,e.createElement(x.Z,{columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u5546\u54C1\u4ECB\u7ECD",dataIndex:"introduction",key:"introduction"},{title:"\u5546\u54C1\u7C7B\u522B",dataIndex:"commodityTypes",key:"commodityTypes",render:function(r){return r.length>0?r.map(function(a){return a.type}).join(","):null}},{title:"Action",key:"action",render:function(r,a){return e.createElement(O.Z,{size:"middle"},e.createElement(c.Z,{onClick:function(){console.log(a),ie(a)}},"\u7F16\u8F91"),e.createElement(N.Z,{title:"\u786E\u8BA4\u5220\u9664\uFF1F",okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",onConfirm:function(){(0,i.wz)(P,a.id).then(function(){return M()})}},e.createElement(c.Z,{danger:!0},"\u5220\u9664")))}}],dataSource:Q,pagination:D,onChange:function(r){return j(r)},rowKey:function(r){return r.id}})),e.createElement(U.Z,{title:"\u65B0\u589E",width:800,visible:te,okButtonProps:{htmlType:"submit",form:"addForm"},onCancel:function(){return p(!1)}},e.createElement(n.Z,(0,h.Z)({name:"addForm",form:B},i.cl,{validateMessages:i.AS,onFinish:se}),e.createElement(n.Z.Item,{name:"name",label:"\u5546\u54C1\u540D\u79F0",rules:[{required:!0}]},e.createElement(E.Z,null)),e.createElement(n.Z.Item,{name:"introduction",label:"\u5546\u54C1\u4ECB\u7ECD",rules:[{required:!0}]},e.createElement(E.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u5206\u7C7B"},e.createElement(n.Z.List,{name:"commodityTypes"},function(o,r){var a=r.add,l=r.remove;return e.createElement(e.Fragment,null,o.map(function(u){var s=u.key,m=u.name,_=u.fieldKey,de=(0,L.Z)(u,["key","name","fieldKey"]);return e.createElement(O.Z,{key:s},e.createElement(n.Z.Item,{name:[m,"id"],fieldKey:[_,"id"],style:{display:"none"}},e.createElement(Z.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u7C7B\u578B",name:[m,"type"],fieldKey:[_,"type"],rules:[{required:!0}]},e.createElement(E.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u6570\u91CF",name:[m,"amount"],fieldKey:[_,"amount"],rules:[{required:!0}]},e.createElement(Z.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u4EF7\u683C",name:[m,"price"],fieldKey:[_,"price"],rules:[{required:!0}]},e.createElement(Z.Z,null)),e.createElement(n.Z.Item,{name:[m,"image"],fieldKey:[_,"image"],valuePropName:"fileList",getValueFromEvent:i.Ph,label:"\u5546\u54C1\u56FE\u7247",rules:[{required:!0}]},e.createElement(A.Z,{name:"file",listType:"picture",action:v.Z.IMAGE_UPLOAD_URL,showUploadList:{showRemoveIcon:!1},maxCount:1},e.createElement(c.Z,{icon:e.createElement(b.Z,null)},"\u9009\u62E9\u5546\u54C1\u7C7B\u578B\u56FE\u7247"))),e.createElement(W.Z,{onClick:function(){l(m)}}),e.createElement(k.Z,{onClick:function(){a(void 0,m+1)}}))}),e.createElement(n.Z.Item,null,e.createElement(c.Z,{type:"dashed",onClick:function(){a()},block:!0,icon:e.createElement(S.Z,null)},"\u6DFB\u52A0\u7C7B\u578B")))})))),e.createElement(U.Z,{title:"\u7F16\u8F91",width:1200,visible:le,okButtonProps:{htmlType:"submit",form:"editForm"},onCancel:function(){return g(!1)}},e.createElement(n.Z,(0,h.Z)({name:"editForm",form:y},i.cl,{onFinish:Ee,validateMessages:i.AS}),e.createElement(n.Z.Item,{label:"ID",name:"id",rules:[{required:!0}]},e.createElement(E.Z,{disabled:!0})),e.createElement(n.Z.Item,{name:"name",label:"\u5546\u54C1\u540D\u79F0",rules:[{required:!0}]},e.createElement(E.Z,null)),e.createElement(n.Z.Item,{name:"sellerId",label:"\u5546\u5BB6ID",rules:[{required:!0}]},e.createElement(Z.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u4ECB\u7ECD",name:"introduction",rules:[{required:!0}]},e.createElement(E.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u5206\u7C7B"},e.createElement(n.Z.List,{name:"commodityTypes"},function(o,r){var a=r.add,l=r.remove;return e.createElement(e.Fragment,null,o.map(function(u){var s=u.key,m=u.name,_=u.fieldKey,de=(0,L.Z)(u,["key","name","fieldKey"]);return e.createElement(O.Z,{key:s},e.createElement(n.Z.Item,{name:[m,"id"],fieldKey:[_,"id"],style:{display:"none"}},e.createElement(Z.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u7C7B\u578B",name:[m,"type"],fieldKey:[_,"type"],rules:[{required:!0}]},e.createElement(E.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u6570\u91CF",name:[m,"amount"],fieldKey:[_,"amount"],rules:[{required:!0}]},e.createElement(Z.Z,null)),e.createElement(n.Z.Item,{label:"\u5546\u54C1\u4EF7\u683C",name:[m,"price"],fieldKey:[_,"price"],rules:[{required:!0}]},e.createElement(Z.Z,null)),e.createElement(n.Z.Item,{name:[m,"image"],fieldKey:[_,"image"],valuePropName:"fileList",getValueFromEvent:i.Ph,label:"\u5546\u54C1\u56FE\u7247",rules:[{required:!0}]},e.createElement(A.Z,{name:"file",listType:"picture",action:v.Z.IMAGE_UPLOAD_URL,showUploadList:{showRemoveIcon:!1},maxCount:1},e.createElement(c.Z,{icon:e.createElement(b.Z,null)},"\u9009\u62E9\u5546\u54C1\u7C7B\u578B\u56FE\u7247"))),e.createElement(W.Z,{onClick:function(){l(m)}}),e.createElement(k.Z,{onClick:function(){a(void 0,m+1)}}))}),e.createElement(n.Z.Item,null,e.createElement(c.Z,{type:"dashed",onClick:function(){a()},block:!0,icon:e.createElement(S.Z,null)},"\u6DFB\u52A0\u7C7B\u578B")))})))))};K.default=H}}]);
