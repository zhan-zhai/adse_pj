(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[856],{10072:function(Q,v,t){"use strict";t.r(v);var X=t(66120),T=t(4867),Y=t(13753),A=t(48429),x=t(97140),D=t(69178),q=t(14643),l=t(92909),i=t(68699),ee=t(67604),m=t(47552),o=t(44742),B=t(94043),u=t.n(B),r=t(67294),c=t(44084),O=t(24480),y=t(72709),K=[{title:"ID",dataIndex:"cartItemId"},{title:"\u5546\u54C1\u540D",dataIndex:"commodityName"},{title:"\u7C7B\u522B",dataIndex:"type"},{title:"\u6570\u91CF",dataIndex:"quantity"}],U=function(){var L=(0,r.useState)([]),M=(0,o.Z)(L,2),E=M[0],g=M[1],S=(0,r.useState)([]),p=(0,o.Z)(S,2),Z=p[0],b=p[1],F=(0,r.useState)(!1),P=(0,o.Z)(F,2),W=P[0],h=P[1],k=function(s){console.log("selectedRowKeys changed: ",s),g(s)},$={selectedRowKeys:E,onChange:k},I=E.length>0,G=(0,r.useState)([]),C=(0,o.Z)(G,2),j=C[0],z=C[1],w=m.Z.useForm(),V=(0,o.Z)(w,1),f=V[0],R=function(){var _=(0,i.Z)(u().mark(function s(){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.kk)(c.Z.CART_GET,{});case 2:n=e.sent,n&&z(n.data);case 4:case"end":return e.stop()}},s)}));return function(){return _.apply(this,arguments)}}(),N=function(){var _=(0,i.Z)(u().mark(function s(){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.kk)(c.Z.ADDRESS_GET_URL,{});case 2:n=e.sent,n&&(console.log(n),b(n.data));case 4:case"end":return e.stop()}},s)}));return function(){return _.apply(this,arguments)}}(),H=function(){var _=(0,i.Z)(u().mark(function s(){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.getFieldsValue().addressId){e.next=3;break}return l.default.error("\u8BF7\u9009\u62E9\u5730\u5740\u540E\u4E0B\u5355\uFF01"),e.abrupt("return");case 3:return e.next=5,J({cartItemIdList:E,addressId:f.getFieldsValue().addressId});case 5:n=e.sent,n&&R();case 7:case"end":return e.stop()}},s)}));return function(){return _.apply(this,arguments)}}(),J=function(){var _=(0,i.Z)(u().mark(function s(n){var d,e;return u().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=l.default.loading("\u4E0B\u5355\u4E2D..."),a.prev=1,a.next=4,y.Z.post(c.Z.CART_MAKE_ORDER,{data:n});case 4:if(e=a.sent,d(),!(e.code&&e.code==="000")){a.next=9;break}return l.default.success("\u4E0B\u5355\u6210\u529F\uFF01"),a.abrupt("return",e);case 9:if(!(e.code&&e.code!=="000")){a.next=12;break}return l.default.error("\u8BF7\u6C42\u9519\u8BEF:".concat(e.msg)),a.abrupt("return",!1);case 12:return l.default.error("\u8BF7\u6C42\u9519\u8BEF:".concat(e.message)),a.abrupt("return",!1);case 16:return a.prev=16,a.t0=a.catch(1),d(),l.default.error("\u8BF7\u6C42\u9519\u8BEF:".concat(a.t0)),a.abrupt("return",!1);case 21:case"end":return a.stop()}},s,null,[[1,16]])}));return function(n){return _.apply(this,arguments)}}();return(0,r.useEffect)(function(){R(),h(!0),N(),setTimeout(function(){g([]),h(!1)},1e3)},[]),r.createElement("div",null,r.createElement("div",{style:{marginBottom:16}},r.createElement(m.Z,{form:f,layout:"inline"},r.createElement(m.Z.Item,{name:"addressId",label:"\u5730\u5740",rules:[{required:!0}]},r.createElement(D.Z,{placeholder:"\u9009\u62E9\u5730\u5740"},Z.map(function(_){return r.createElement(D.Z.Option,{key:_.id,value:_.id},_.addressDetail)}))),r.createElement(A.Z,{type:"primary",onClick:H,disabled:!I,loading:W},"\u4E0B\u5355")),r.createElement("span",{style:{marginLeft:8}},I?"Selected ".concat(E.length," items"):"")),r.createElement(T.Z,{rowKey:"cartItemId",rowSelection:$,columns:K,dataSource:j}))};v.default=U}}]);
